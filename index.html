<!DOCTYPE html>
<html lang="ja">
<head>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDXmNcJm-NMieg5ANasgDyKSmYVeNQD1MU",
      authDomain: "kihumohou.firebaseapp.com",
      projectId: "kihumohou",
      storageBucket: "kihumohou.firebasestorage.app",
      messagingSenderId: "780352767162",
      appId: "1:780352767162:web:69194592a43ac60c59ee83"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

  // グローバルに使えるように
  window.db = db;
  window.addKifu = async function (kifuData) {
    try {
      await addDoc(collection(db, "kifu"), kifuData);
      alert("棋譜を保存しました");
    } catch (e) {
      console.error("棋譜保存エラー: ", e);
    }
  };
  </script>

  <meta charset="UTF-8" />
  <title>4x4x4 オセロ</title>
  <style>
    body {
      margin: 0;
      background-color: #333;
      font-family: sans-serif;
      overflow: hidden;
    }

    #turn-selection {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      padding: 30px 40px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
      z-index: 10;
    }

    #turn-selection h2 {
      margin-bottom: 20px;
      font-size: 20px;
      font-weight: bold;
    }

    #turn-selection button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #000;
      cursor: pointer;
    }

    #black-button {
      background-color: #eee;
    }

    #white-button {
      background-color: white;
    }

    /* ラベル表示用のCSS */
    .label {
      color: white;
      font-size: 16px;
      font-weight: bold;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 2px 4px;
      border-radius: 4px;
      pointer-events: none;
    }
  </style>
</head>
<body>
<!-- 石の数表示 -->
<div id="stone-count-display" style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); color: black; background: rgba(255,255,255,0.9); padding: 15px 30px; border-radius: 12px; font-size: 24px; font-weight: bold; z-index: 10; min-width: 220px; text-align: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);">
  黒: 0 ／ 白: 0
</div>

 <!-- 手番選択UI -->
  <div id="turn-selection">
    <h2>手番を選んでください</h2>
    <button id="black-button">先手（黒）</button>
    <button id="white-button">後手（白）</button>
  </div>

  <!-- パス用ポップアップ -->
<div id="pass-popup" style="
display: none;
position: absolute;
top: 0; left: 0;
width: 100%; height: 100%;
background: rgba(200,200,200,0.8);
z-index: 99;
display: flex;
justify-content: center;
align-items: center;
">
<div style="
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  text-align: center;
">
  <p>置ける場所がありません。AIのターンになります。</p>
  <button id="pass-ok-button" style="margin-top: 10px;">OK</button>
</div>
</div>


 <!-- ゲーム結果後のUI -->
<div id="game-end-ui" style="display: none; position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px 40px; border-radius: 15px; text-align: center; z-index: 10; min-width: 300px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);">
  <p id="game-result-text" style="font-size: 24px; font-weight: bold; margin-bottom: 20px;"></p>
  <button id="send-kifu-btn" style="font-size: 18px; padding: 10px 20px; border-radius: 8px; margin: 5px;">棋譜を送信</button>
  <button id="new-game-btn" style="font-size: 18px; padding: 10px 20px; border-radius: 8px; margin: 5px;">新しいゲーム</button>
</div>




<!-- 同意ポップアップ -->
<div id="consentPopup" class="popup-overlay" style="
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: flex; justify-content: center; align-items: center;
  z-index: 10000;
">
  <div class="popup-content" style="
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    width: 90%;
    max-width: 500px;
    max-height: 80vh;      /* 画面高さの80%まで */
    overflow-y: auto;      /* 縦スクロール許可 */
    text-align: center;
    font-size: 1rem;
    line-height: 1.5;
  ">
      <p>このゲームは、AIとの対戦専用の3Dオセロです。:)</p><br>
<p>AIが置けるのに置かないバグを修正　2026.02.08.11:00</p>
   
<p>AIに後回しの考えと占有の概念を追加　2026.02.09.16:00</p>

<p>禁止edge認識修正と自分専用マスの適用タイミング修正　2026.02.10.17:00</p>

<p>aiが後手でプレイヤーの引き分けを記録　2026.02.12.12:00</p>

    <p>ai同士では先手の勝ちを記録　2026.02.12.16:00</p>

    <button id="consentButton" style="margin-top: 1.5rem; padding: 0.5rem 1.5rem; font-size: 1rem; border: none; background-color: #4caf50; color: white; border-radius: 0.5rem; cursor: pointer;">
      了承する
    </button>
  </div>
</div>

<script>
  window.addEventListener('DOMContentLoaded', () => {
    const popup = document.getElementById('consentPopup');
    const button = document.getElementById('consentButton');
    const turnUI = document.getElementById('turn-selection');

    if (turnUI) turnUI.style.display = 'none';

    button.addEventListener('click', () => {
      popup.style.display = 'none';
      if (turnUI) turnUI.style.display = 'block';
      init(); // 同意後にゲーム初期化開始
    });
  });
</script>

  <!-- JavaScript本体 -->
  <script type="module" src="./main.js"></script>


</body>
</html>



